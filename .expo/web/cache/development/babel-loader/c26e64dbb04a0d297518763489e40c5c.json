{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Avatar, ListItem } from \"react-native-elements\";\nimport { useEffect, useState } from \"react\";\nimport { db } from \"../firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CustomListItem = function CustomListItem(_ref) {\n  var _chatMessage$, _chatMessage$2, _chatMessage$3;\n  var id = _ref.id,\n    ChatName = _ref.ChatName,\n    enterChat = _ref.enterChat;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    chatMessage = _useState2[0],\n    setChatMessage = _useState2[1];\n  useEffect(function () {\n    var unsubscribe = db.collection(\"chats\").doc(id).collection(\"messages\").orderBy(\"timestamp,desc\").onSnapshot(snap);\n    return unsubscribe;\n  });\n  return _jsxs(ListItem, {\n    onPress: function onPress() {\n      enterChat(id, ChatName);\n    },\n    bottomDivider: true,\n    children: [_jsx(Avatar, {\n      rounded: true,\n      source: {\n        uri: (chatMessage == null ? void 0 : (_chatMessage$ = chatMessage[0]) == null ? void 0 : _chatMessage$.photoURL) || \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\"\n      }\n    }), _jsxs(ListItem.Content, {\n      children: [_jsx(ListItem.Title, {\n        style: {\n          fontWeight: \"800\"\n        },\n        children: ChatName\n      }), _jsxs(ListItem.Subtitle, {\n        numberOfLines: 1,\n        ellipsizeMode: \"tail\",\n        children: [chatMessage == null ? void 0 : (_chatMessage$2 = chatMessage[0]) == null ? void 0 : _chatMessage$2.displayName, \":\", chatMessage == null ? void 0 : (_chatMessage$3 = chatMessage[0]) == null ? void 0 : _chatMessage$3.message]\n      })]\n    })]\n  }, id);\n};\nexport default CustomListItem;\nvar styles = StyleSheet.create({});","map":{"version":3,"names":["Avatar","ListItem","useEffect","useState","db","CustomListItem","id","ChatName","enterChat","chatMessage","setChatMessage","unsubscribe","collection","doc","orderBy","onSnapshot","snap","uri","photoURL","fontWeight","displayName","message","styles","StyleSheet","create"],"sources":["/Users/aliozer/Desktop/SÄ±gnal/Signal-Clone/components/CustomListItem.js"],"sourcesContent":["import { StyleSheet, Text, View } from \"react-native\";\nimport { Avatar, ListItem } from \"react-native-elements\";\nimport { useEffect, useState } from \"react\";\nimport { db } from \"../firebase\";\n\nconst CustomListItem = ({ id, ChatName, enterChat }) => {\n  const [chatMessage, setChatMessage] = useState([]);\n\n  useEffect(() => {\n    const unsubscribe = db\n      .collection(\"chats\")\n      .doc(id)\n      .collection(\"messages\")\n      .orderBy(\"timestamp,desc\")\n      .onSnapshot(snap)\n    return unsubscribe;\n  });\n  return (\n    <ListItem\n      key={id}\n      onPress={() => {\n        enterChat(id, ChatName);\n      }}\n      bottomDivider\n    >\n      <Avatar\n        rounded\n        source={{\n          uri:\n            chatMessage?.[0]?.photoURL ||\n            \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\",\n        }}\n      />\n      <ListItem.Content>\n        <ListItem.Title style={{ fontWeight: \"800\" }}>\n          {ChatName}\n        </ListItem.Title>\n        <ListItem.Subtitle numberOfLines={1} ellipsizeMode=\"tail\">\n          {chatMessage?.[0]?.displayName}:{chatMessage?.[0]?.message}\n        </ListItem.Subtitle>\n      </ListItem.Content>\n    </ListItem>\n  );\n};\n\nexport default CustomListItem;\n\nconst styles = StyleSheet.create({});\n"],"mappings":";;;;AACA,SAASA,MAAM,EAAEC,QAAQ,QAAQ,uBAAuB;AACxD,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,EAAE;AAAsB;AAAA;AAEjC,IAAMC,cAAc,GAAG,SAAjBA,cAAc,OAAoC;EAAA;EAAA,IAA9BC,EAAE,QAAFA,EAAE;IAAEC,QAAQ,QAARA,QAAQ;IAAEC,SAAS,QAATA,SAAS;EAC/C,gBAAsCL,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA3CM,WAAW;IAAEC,cAAc;EAElCR,SAAS,CAAC,YAAM;IACd,IAAMS,WAAW,GAAGP,EAAE,CACnBQ,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACP,EAAE,CAAC,CACPM,UAAU,CAAC,UAAU,CAAC,CACtBE,OAAO,CAAC,gBAAgB,CAAC,CACzBC,UAAU,CAACC,IAAI,CAAC;IACnB,OAAOL,WAAW;EACpB,CAAC,CAAC;EACF,OACE,MAAC,QAAQ;IAEP,OAAO,EAAE,mBAAM;MACbH,SAAS,CAACF,EAAE,EAAEC,QAAQ,CAAC;IACzB,CAAE;IACF,aAAa;IAAA,WAEb,KAAC,MAAM;MACL,OAAO;MACP,MAAM,EAAE;QACNU,GAAG,EACD,CAAAR,WAAW,qCAAXA,WAAW,CAAG,CAAC,CAAC,qBAAhB,cAAkBS,QAAQ,KAC1B;MACJ;IAAE,EACF,EACF,MAAC,QAAQ,CAAC,OAAO;MAAA,WACf,KAAC,QAAQ,CAAC,KAAK;QAAC,KAAK,EAAE;UAAEC,UAAU,EAAE;QAAM,CAAE;QAAA,UAC1CZ;MAAQ,EACM,EACjB,MAAC,QAAQ,CAAC,QAAQ;QAAC,aAAa,EAAE,CAAE;QAAC,aAAa,EAAC,MAAM;QAAA,WACtDE,WAAW,sCAAXA,WAAW,CAAG,CAAC,CAAC,qBAAhB,eAAkBW,WAAW,EAAC,GAAC,EAACX,WAAW,sCAAXA,WAAW,CAAG,CAAC,CAAC,qBAAhB,eAAkBY,OAAO;MAAA,EACxC;IAAA,EACH;EAAA,GArBdf,EAAE,CAsBE;AAEf,CAAC;AAED,eAAeD,cAAc;AAE7B,IAAMiB,MAAM,GAAGC,UAAU,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC"},"metadata":{},"sourceType":"module"}